(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{fa9ab7287602ef4f061b:function(e,t,r){"use strict";r.r(t);var n=r("8af190b70a6bc55c6f1b"),a=r.n(n),o=r("0d939196e59ed73c94e6"),i=r("0d7f0986bcd2f33d8a2a"),l=r("ab039aecd4a1d4fedc0e"),c=r("64f8e359e5376d31c8d3"),s=r("6580e3a841bd6dc9a0fe"),u=r("1c2538367908c46ee10d"),m=r("1a4ed1ba7965942fe077"),d=r("d1f8212a47a511a9ad3a"),f=r("e1d597c8abc5a3008a44");function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){var t=e.filter,r=e.setGridFilter,i=e.filterSubmit,l=b(Object(n.useState)([]),2),c=l[0],p=l[1],y=Object(d.useSnackbar)().enqueueSnackbar,g=function(){i(E)},v=Object(s.b)(t,!0,!1,g,[]),E=v.values,h=v.errors,S=v.handleInputChange,w=v.handleSubmit,O=v.resetForm,j=function(e){y(e,{variant:"error"})};Object(n.useEffect)((function(){Object(m.b)("get","/selectlist/sellerId",p,j)}),[]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,{onSubmit:w},a.a.createElement(o.Grid,{container:!0},a.a.createElement(o.Grid,{item:!0,xs:12},a.a.createElement(o.Grid,{container:!0,style:{padding:10},spacing:1},a.a.createElement(o.Grid,{item:!0,lg:3,xs:6},a.a.createElement(u.a.Input,{name:"name",label:"Nome",value:E.name,onChange:S,error:h.name})),a.a.createElement(o.Grid,{item:!0,lg:3,xs:6},a.a.createElement(u.a.Input,{name:"document",label:"Documento",value:E.document,mask:"999.999.999-99",onChange:S,error:h.name})),a.a.createElement(o.Grid,{item:!0,lg:3,xs:6},a.a.createElement(u.a.Input,{name:"mail",label:"Email",value:E.mail,onChange:S,error:h.mail})),a.a.createElement(o.Grid,{item:!0,lg:3,xs:6},a.a.createElement(u.a.MultiSelect,{label:"Empresas Vinculadas",name:"sellerId",value:E.sellerId,onChange:S,options:c,values:E.sellerId,error:h.sellerId})),a.a.createElement(o.Grid,{item:!0,lg:3,xs:6},a.a.createElement(u.a.MultiSelect,{name:"su",label:"Super User",onChange:S,options:[{title:"Ativo",id:!0},{title:"Inativo",id:!1}],value:E.su,error:h.su}))))),a.a.createElement(o.Grid,{container:!0,style:{padding:15,marginTop:-25},justifyContent:"flex-start",spacing:1},a.a.createElement(o.Grid,{item:!0,xs:12},a.a.createElement(o.Grid,{container:!0,spacing:2},a.a.createElement(o.Grid,{item:!0,lg:2},a.a.createElement(f.a,{type:"submit",onClick:function(){g()},icon:"filter_list",label:"Filtrar"})),a.a.createElement(o.Grid,{item:!0,lg:2},a.a.createElement(f.a,{color:"default",onClick:function(){r({limit:25,offset:0}),sessionStorage.setItem("usersFilter",JSON.stringify({limit:25,offset:0})),O()},label:"Limpar Filtros",icon:"clear"})))))))}var g=r("f8d3582cb63722b51e34"),v=r("e1f4d4d03e3022cb8ad7");var E=function(e){var t=e.blockUser,r=e.unlockUser,n=e.activeSuperUser,i=e.inactiveSuperUser,l=e.rowsSelected;return a.a.createElement(o.Grid,{container:!0,spacing:2,justifyContent:"flex-end"},a.a.createElement(o.Grid,{item:!0},a.a.createElement(f.a,{onClick:t,icon:"lock",label:"Bloquear Usu\xe1rio",disabled:0==l.length})),a.a.createElement(o.Grid,{item:!0},a.a.createElement(f.a,{onClick:r,icon:"lock_open",label:"Desbloquear Usu\xe1rio",disabled:0==l.length})),a.a.createElement(o.Grid,{item:!0},a.a.createElement(f.a,{onClick:n,icon:"manage_accounts",label:"Ativar SuperUser",disabled:0==l.length})),a.a.createElement(o.Grid,{item:!0},a.a.createElement(f.a,{onClick:i,icon:"manage_accounts",label:"Desativar SuperUser",disabled:0==l.length})))},h=r("9f100a413d2aaf9e0ca5"),S=r.n(h),w=r("fe0b34a58afc62cf66c2"),O=r.n(w),j=r("197746a978fbb7f5fd81"),I=r("f440144a4a0657615a15"),C=r("30a2323f7d39e55e43f3"),A=r("c1ff5b6cec5f671be822");r("3b5f7ecbc2e1d860d571");function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e){var t=function(){return c(!l)},r=function(e){return e.preventDefault()},i=G(Object(n.useState)(!1),2),l=i[0],c=i[1],b=G(Object(n.useState)({}),2),p=b[0],y=(b[1],G(Object(n.useState)(!1),2)),g=y[0],v=y[1],E=Object(d.useSnackbar)().enqueueSnackbar,h=e.open,w=e.setResetPasswordOpen,k=e.valueReset,x=Object(s.b)(p,!0,(function(){try{v(!0),Object(m.b)("put","/user/su/password",(function(e){E("Senha alterada com sucesso!",{variant:"success"}),v(!1)}),(function(e){return E(e.code,{variant:"error"})}),{reset:!0,mail:k.mail,password:Object(A.SHA256)(P.password).toString(),name:P.name,code:P.code})}catch(e){console.log(e)}}),[{field:"password",message:"Necess\xe1rio conter letras, n\xfameros e no m\xednimo seis caracteres",rule:function(e){return!Object(j.a)(e.password)}},{field:"passwordConfirm",message:"Senhas diferentes",rule:function(e){return!Object(I.a)(e.passwordConfirm,e.password)}}]),P=x.values,U=x.errors,_=x.handleInputChange,F=x.handleSubmit;x.resetForm;return a.a.createElement(o.Dialog,{open:h,onClose:function(){w(!1)},"aria-labelledby":"form-dialog-title"},a.a.createElement(o.DialogTitle,{id:"form-dialog-title",style:{marginBottom:0}},"Resetar Senha"),a.a.createElement(s.a,{onSubmit:F},a.a.createElement(o.Grid,{container:!0,spacing:1,style:{padding:20}},a.a.createElement(o.Grid,{item:!0,xs:12},a.a.createElement(u.a.Input,{autoFocus:!0,name:"mail",label:"E-mail*",onChange:function(e){return changeCustom(e,C.f,_)},disabled:!0,value:k.mail?k.mail:"",error:U.mail})),a.a.createElement(o.Grid,{item:!0,xs:6},a.a.createElement(u.a.Input,{autoFocus:!0,name:"password",label:"Nova Senha*",type:l?"text":"password",onChange:_,value:P.password,error:U.password,inputProps:{maxLength:20},InputProps:{endAdornment:a.a.createElement(o.InputAdornment,{position:"end"},a.a.createElement(o.IconButton,{"aria-label":"Toggle password visibility",onClick:t,onMouseDown:r},l?a.a.createElement(O.a,null):a.a.createElement(S.a,null)))}})),a.a.createElement(o.Grid,{item:!0,xs:6},a.a.createElement(u.a.Input,{name:"passwordConfirm",label:"Confirmar Senha*",type:l?"text":"password",onChange:_,value:P.passwordConfirm,error:U.passwordConfirm,inputProps:{maxLength:20},InputProps:{endAdornment:a.a.createElement(o.InputAdornment,{position:"end"},a.a.createElement(o.IconButton,{"aria-label":"Toggle password visibility",onClick:t,onMouseDown:r},l?a.a.createElement(O.a,null):a.a.createElement(S.a,null)))}})),a.a.createElement(o.Grid,{item:!0,xs:6},a.a.createElement(f.a,{fullWidth:!0,type:"submit",name:"buttom",label:"Confirmar",disabled:g,onChange:_,value:P.buttom,error:U.buttom,startIcon:a.a.createElement(o.Icon,{style:{marginLeft:5,fontSize:14}},"mail_outline")})),a.a.createElement(o.Grid,{item:!0,xs:6},a.a.createElement(f.a,{fullWidth:!0,name:"close",label:"Fechar",onClick:function(){w(!1)},value:P.buttom,error:U.buttom,startIcon:a.a.createElement(o.Icon,{style:{marginLeft:5,fontSize:14}},"close")})))))}function P(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=Object(l.injectIntl)((function(e){var t,r=e.intl,l=R(Object(n.useState)({limit:25,offset:0}),2),s=l[0],b=l[1],p=Object(d.useSnackbar)().enqueueSnackbar,h=R(Object(n.useState)(!1),2),S=h[0],w=h[1],O=R(Object(n.useState)([]),2),j=O[0],I=O[1],C=R(Object(n.useState)([]),2),A=C[0],G=C[1],k=R(Object(n.useState)([]),2),U=k[0],T=k[1],L=R(Object(n.useState)([]),2),B=L[0],q=L[1],M=function(){Object(m.b)("get","/user/usersPage",(function(e){G(e.retFiltered),T(_(_({},U),{},{total:e.total}))}),(function(e){return p(e,{variant:"error"})}),{},{params:s})};Object(n.useEffect)((function(){M()}),[s]);var N=function(){M()},J=function(e){Object(m.b)("post","/user/removeOrActiveSuperUser",(function(){p("Alterado com sucesso!",{variant:"success"}),N(),M()}),(function(e){return p(e.code,{variant:"error"})}),{_id:e._id?[e._id]:j.map((function(e){return e._id})),su:!0}),I([])},z=function(e){Object(m.b)("post","/user/removeOrActiveSuperUser",(function(){p("Alterado com sucesso!",{variant:"success"}),N()}),(function(e){return p(e.code,{variant:"error"})}),{_id:e._id?[e._id]:j.map((function(e){return e._id})),su:!1}),I([])},H=function(e){Object(m.b)("post","/user/blockAccess",(function(){p("Usu\xe1rio(s) bloqueado(s) com sucesso!",{variant:"success"}),N()}),(function(e){return p(e.code,{variant:"error"})}),{userIds:e._id?[e._id]:j.map((function(e){return e._id})),active:!1}),I([])},$=function(e){Object(m.b)("post","/user/blockAccess",(function(){p("Usu\xe1rio(s) desbloqueado(s) com sucesso!",{variant:"success"}),N()}),(function(e){return p(e.code,{variant:"error"})}),{userIds:e._id?[e._id]:j.map((function(e){return e._id})),active:!0}),I([])},V=[{name:"",label:"",options:{customBodyRenderLite:function(e){var t=A[e];return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.Avatar,{variant:"circular",alt:t.name,src:t.picture,style:{width:40,height:40}},t.title?t.title.toString().charAt(0):""))}}},{name:"name",label:"Nome",options:{customBodyRenderLite:function(e){var t=A[e];return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{style:{marginTop:10}},t.name))}}},{name:"mail",label:"Email",options:{customBodyRenderLite:function(e){var t=A[e];return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,t.mail?t.mail.toString().substring(0,40):"Sem t\xedtulo"))}}},{name:"active",label:"Usu\xe1rio Desbloqueado",options:{customBodyRenderLite:function(e){var t=A[e];return a.a.createElement(o.Switch,{name:"active",checked:t.active,onChange:function(){t.active=!t.active,t.active?$(t):H(t),G(P(A))}})}}},{name:"sellerNames",label:"Empresas Vinculadas"},{name:"document",label:"Documento",options:{customBodyRenderLite:function(e){var t=A[e];return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,t.document?t.document.toString().substring(0,40):"Sem t\xedtulo"))}}},{name:"su",label:"Super User",options:{customBodyRenderLite:function(e){var t=A[e];return a.a.createElement(u.a.Switch,{name:"su",checked:t.su,onChange:function(){t.su=!t.su,t.su?J(t):z(t),G(P(A))}})}}},{name:"reset_password",label:"Resetar Senha",options:{customBodyRenderLite:function(e){var t=A[e];return a.a.createElement(f.a,{name:"reset_password",label:"Resetar Senha",icon:"key",onClick:function(){w(!0),q(t)}})}}}],W=(F(t={serverSide:!0,rowsPerPage:s.limit,rowsPerPageOptions:[25,50,100],filter:!1,search:!1,print:!1,count:U.total,sort:!1,selectableRows:!0,download:!1,jumpToPage:!0,responsive:"scrollMaxHeight",viewColumns:!1,page:U.page,setTableProps:function(){return{size:"small"}},filterType:"multiselect",textLabels:Object(v.a)(r)},"responsive","simple"),F(t,"onTableChange",(function(e,t){if("changePage"!=e&&"changeRowsPerPage"!=e||(T(_(_({},U),{},{page:t.page})),b(_(_({},s),{},{offset:s.limit*t.page,limit:t.rowsPerPage}))),"rowSelectionChange"==e){var r,n=[],a=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=D(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(t.selectedRows.data);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=A[o.dataIndex];i&&n.push({_id:i._id})}}catch(e){a.e(e)}finally{a.f()}I(n)}})),F(t,"customToolbar",(function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.Grid,{container:!0},a.a.createElement(o.Grid,{item:!0,xs:12,style:{display:"flex"}},a.a.createElement(E,{activeSuperUser:J,inactiveSuperUser:z,blockUser:H,unlockUser:$,rowsSelected:j,gridFilter:s})),a.a.createElement(x,{valueReset:B,setResetPasswordOpen:w,open:S})))})),F(t,"downloadOptions",{filterOptions:{useDisplayedColumnsOnly:!0,useDisplayedRowsOnly:!0}}),F(t,"selectToolbarPlacement","none"),t);return a.a.createElement("div",null,a.a.createElement(i.Helmet,null,a.a.createElement("title",null,"Usu\xe1rios"),a.a.createElement("meta",{name:"description",content:"Gerenciamento de Usu\xe1rios do Sistema"}),a.a.createElement("meta",{property:"og:title"}),a.a.createElement("meta",{property:"og:description"}),a.a.createElement("meta",{property:"twitter:title"}),a.a.createElement("meta",{property:"twitter:description"})),a.a.createElement(o.Grid,{item:!0,style:{marginBottom:18},xs:12},a.a.createElement(c.a,{icon:"account_circle",label:"Usu\xe1rios"})),a.a.createElement(o.Paper,null,a.a.createElement(o.Grid,{container:!0,spacing:2},a.a.createElement(o.Grid,{item:!0,xs:12},a.a.createElement(y,{filter:s,setGridFilter:b,filterSubmit:function(e){sessionStorage.setItem("UsersFilter",JSON.stringify(_(_({},e),{},{limit:25,offset:0}))),sessionStorage.setItem("usersState",JSON.stringify({limit:25,offset:0})),b(_(_({},e),{},{limit:25,offset:0}))}})),a.a.createElement(o.Grid,{item:!0,xs:12},a.a.createElement(g.a,{data:A,columns:V,options:W})))))}))}}]);